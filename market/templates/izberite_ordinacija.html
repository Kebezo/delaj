{% extends 'base.html' %}
{% block title %}
Izberite Ordinacijo
{% endblock %}
<head>
    {% block content%}
    <style>
#opcije {
  display: flex;
  justify-content: flex-start;
  width: 400px;
}

#opcije a {
  background-color: #17a2b8;
  color: #fff;
  padding: 10px;
  text-decoration: none;
}

#opcije a.active {
  background-color: #f0f0f0;

   color: #000;
}

#iskalnik {
  background-color: #f0f0f0;
  padding: 40px;
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  align-items: center;
}

#iskalnik select,
#iskalnik input {
  font-size: 16px;
  font-weight: 500;
  padding: 10px;
  margin-right: 30px;
  flex: 1;
}
#iskalnik select option {
  font-size: 25x;
}
#iskalnik button {
  font-size: 16px;
  font-weight: 500;

  padding: 10px 20px;
  background-color: #17a2b8;
  color: #fff;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  flex-shrink: 0;
}
.tt-suggestion {
  background-color: #343A40;
  padding: 10px;
  cursor: pointer;
  width: 217px;
}
.container{
  transform: scale(1.25);
  margin-top: 70px;
}
#iskalnik p {
  color: black;
  margin-bottom: 10px;
}

    </style>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>


</head>
<body>
<div class="container">
 <div class="row justify-content-center mt-4">
        <div class="col-lg-8 col-md-10">
        <h2>Specialisti</h2><br> <h5>Najdite specialista blizu vas</h5><br>
        <div id="shearch">
            <div id="opcije">
                <a class="active" data-tab="tab-1" href="#">Poiščite tip ordinacije</a>
                <a class="" data-tab="tab-2" href="#">Poiščite po imenu</a>
            </div>
            <div id="iskalnik">
                <div id="tab-1" class="find-doctor active">
                    <p style="color: black">Izberite tip specialista in mesto (neobvezno)</p>
                    <form id="doctorsearch_tall" class="search-submit clearfix" action="#" method="get">
                        <select data-settings="{&quot;cutOff&quot;:6}" class="dropdown" name="specialty" id="specialty"
                                size="1" tabindex="1">
                            <option value="0">Izberite specialista...</option>

                                {% for type in types %}
                                <option value="{{ type[0] }}">{{ type[0] }}</option>
                                {% endfor %}

                        </select>

                        <input class="typeahead" placeholder="Poiščite mesto" type="text" style="margin-top: -10px"
                               name="city">
                        <button id="search-button">Poiščite</button>

                    </form>
                </div>
                <div id="tab-2" class="by-name">
                     <p style="color: black">Poiščite ordinacijo po imenu</p>
                    <div class="by-name-input-wrap">
                        <input type="text" name="first_name" id="first_name" placeholder="Ordinacija" class="typeahead">

                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
</div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/typeahead.js/0.11.1/typeahead.bundle.min.js"></script>

<script>

    $(document).ready(function() {
  // Hide all tabs except the first one
  $("#tab-2").hide();

  // Click event handler for tabs
  $("#opcije a").click(function() {
    // Remove active class from all tabs
    $("#opcije a").removeClass("active");

    // Get the tab ID from the data attribute
    var tabId = $(this).data("tab");

    // Hide all tabs
    $("#iskalnik div").hide();

    // Show the clicked tab and all its children
    $("#" + tabId).show().find('*').show();

    // Add active class to clicked tab
    $(this).addClass("active");

    // Show/hide first name input field in the second tab
    if (tabId === "tab-2") {
      $("#tab-2 .by-name-input-wrap").show();
    } else {
      $("#tab-2 .by-name-input-wrap").hide();
    }

    // Show the basics div when the first tab is clicked
  });
});



var substringMatcher = function(strs) {
  return function findMatches(q, cb) {
    var matches, substringRegex;

    // an array that will be populated with substring matches
    matches = [];

    // regex used to determine if a string contains the substring `q`
    substrRegex = new RegExp(q, 'i');

    // iterate through the pool of strings and for any string that
    // contains the substring `q`, add it to the `matches` array
    $.each(strs, function(i, str) {
      if (substrRegex.test(str)) {
        matches.push(str);
      }
    });

    cb(matches);
  };
};

var kraji1 = {{ mesta_variable | safe }};
$('#tab-1 .typeahead').typeahead({
  hint: true,
  highlight: true,
  minLength: 1,
},
{
  name: 'kraji1',
  source: substringMatcher(kraji1),
  limit: 1
});

</script>


<script>

 var substringMatcher1 = function(strs) {
  return function findMatches(q, cb) {
    var matches, substringRegex;

    // an array that will be populated with substring matches
    matches = [];

    // regex used to determine if a string contains the substring `q`
    substrRegex = new RegExp(q, 'i');

    // iterate through the pool of strings and for any string that
    // contains the substring `q`, add it to the `matches` array
    $.each(strs, function(i, str) {
      if (substrRegex.test(str)) {
        matches.push(str);
      }
    });

    cb(matches);
  };
};
var kraji2 = {{ base_variable | safe }};
$('#tab-2 .typeahead').typeahead({
  hint: true,
  highlight: true,
  minLength: 1,
},
{
  name: 'kraji2',
  source: substringMatcher1(kraji2),
  limit: 3
});
$('#tab-2 .typeahead').on('typeahead:selected', function(event, suggestion) {
  window.location.href = '/ordinacija/' + suggestion;
  console.log("Selected suggestion: " + suggestion);
});


$(function() {
  $('#search-button').click(function() {
    var specialty = $('#specialty').val();
    var city = $('input[name="city"]').val();

    if (specialty == 0) {
      alert('Izberite tip specialista');
      return false;
    }

    if (!city) {
      city = 'V'
    }

    var url = '/termin/' + encodeURIComponent(specialty) + '/' + encodeURIComponent(city);
    window.location.href = url;
    return false;
  });
});





</script>

{% endblock %}

